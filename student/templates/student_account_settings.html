<!--
Developers : Dmitrij Petters,
All code is property of original developers.
Copyright 2011. All Rights Reserved.
-->

{% extends "account_settings_base.html" %}

{% block metadata %}
{{block.super}}
<link rel="stylesheet" href="{{ STATIC_URL }}css/student/student_account_settings.css" />
<script type="text/javascript" src="{{ STATIC_URL }}javascript/student/student_account_settings.js"></script>
{% endblock %}

{% block account_settings_tabs %}
    <ul>
        <li><a href="#tabs-1">Account Overview</a></li>
        <li><a href="#tabs-2">Preferences</a></li>
    </ul>
    <div id="tabs-1" class="clearfix">
        <div id="account_overview_left_side">
            <h3 class="no_top_margin">Basic Info</h3>
            <table id="basic_info_table" class="form_table">
                <tbody>
                    <tr>
                        <th><label>Email:</label></th>
                        <td>
                            <p>{{user.email}}</p>
                        </td>
                    </tr>
                </tbody>
            </table>
            <form id="password_change_form" method='POST' action="{% url password_change %}">
                {% csrf_token %}
                <h3>Change Password</h3>
                <p class="sub_header_message">By changing your password you will be logged off of all other sessions.</p>
                <table class="form_table">
                    <tbody>
                        <tr>
                            <th>{{change_password_form.old_password.label_tag}}</th>
                            <td>
                                <div class="errorspace">{{form.old_password.errors}}</div>
                                {{change_password_form.old_password}}</td>
                        </tr>
                        <tr>
                            <th>{{change_password_form.new_password1.label_tag}}</th>
                            <td>
                                <div class="errorspace">{{form.new_password1.errors}}</div>
                                {{change_password_form.new_password1}}
                            </td>
                        </tr>
                        <tr>
                            <th>{{change_password_form.new_password2.label_tag}}</th>
                            <td>
                                <div class="errorspace">{{form.new_password2.errors}}</div>
                                {{change_password_form.new_password2}}
                            </td>
                        </tr>
                        <tr>
                             <div class="error_section error">
                            </div>
                        </tr>
                        <tr>
                            <th></th>
                            <td>
                                <input class="button" type='submit' value='Change Password'>
                                <img id='ajax_form_submit_loader' style="display:none" src='{{ STATIC_URL }}images/page_elements/loaders/small_ajax_loader.gif'>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </form>
            <h3>Deactivate Account</h3>
            <p class="sub_header_message">By deactivating you remove your listing and all stored data off of the site.</p>
            <p class="sub_header_message">Your account can be restored by logging back in. <a id="deactivate_account_link" href="javascript:void(0)">Deactivate Account</a></p>
        </div>
    </div>
    <div id="tabs-2" class="clearfix">
        <div  id="preferences_left_side">
            <h3 class="no_top_margin">Notification Preferences</h3>
            <p class="sub_header_message">Umeqo provides notifications in the form of emails. They will be sent to {{user.email}}</p>
            <p id="global_settings_section">
                <span>Global Settings</span>
                <label for="global_email_checkbox">Email Me:</label>
                <input type="checkbox" id="global_email_checkbox" />
            </p>
            <table id="notifications_table">
                <tbody>
                   <tr>
                       <th>Invitations</th>
                       <th>Email</th>
                   </tr>
                   <tr>
                      <td>{{preferences_form.email_on_invite_to_public_event.label}}</td>
                      <td class="checkbox">
                          {{preferences_form.email_on_invite_to_public_event}}
                      </td>
                   </tr>
                   <tr>
                      <td>{{preferences_form.email_on_invite_to_private_event.label}}</td>
                      <td class="checkbox">
                          {{preferences_form.email_on_invite_to_private_event}}
                      </td>
                   </tr>
                   <tr>
                       <th>Events</th>
                       <th>Email</th>
                   </tr>
                   <tr>
                      <td>{{preferences_form.email_on_new_event.label}}</td>
                      <td class="checkbox">
                          {{preferences_form.email_on_new_event}}
                      </td>
                   </tr>
                </tbody>              
            </table>
        </div>
    </div>
{% endblock %}