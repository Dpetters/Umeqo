{% extends "base.html" %}

{% block title %}
Checkout |
{% endblock %}

{% block metadata %}
{% load compress %}
{% compress css %}
<link rel="stylesheet" href="{{ STATIC_URL }}css/subscription/checkout.css" />
{% endcompress %}

<script type="text/javascript" src="https://js.stripe.com/v1/"></script>
{% compress js %}
    <script src="{{ STATIC_URL }}js/subscription/checkout.js"></script>
{% endcompress %}
{% endblock %}

{% block content_area %}
<h1>Change Billing Cycle</h1>
<div class="main_block no_header">
    <form id="billing_cycle_change_form" action="" method="POST">
        {% csrf_token %}
        {% for hidden in form.hidden_fields %}
            {{ hidden }}
        {% endfor %}
        <div id="billing_cycle">
            <h3>Choose New Billing Cycle:</h3>
            {{form.billing_cycle}}
            <p id="charge_amount">You will be charged $<span id="price"></span></p>
        </div>
        <div id="payment_info">
            <h3>Payment Info</h3>
            {% if customer %}
                {% include "active_card.html" %}
                {% include 'card_form.html' with hidden="True" checkout="True" %}
                {% include 'payment_change_link.html' %}
                <div id="submit_div">
                    {% include "card_form_submit_button.html" with checkout="True" %}                    
                </div>
            {% else %}
                {% include 'card_form.html' with checkout="True" %}
            {% endif %}
        </div>
    </form>
</div>
<p id="currency">All amounts shown are in US dollars.</p>
{% endblock %}